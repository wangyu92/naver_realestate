<%
  # Input field component
  # Parameters:
  # - label: input label text
  # - type: text, email, password, search, tel, url, etc.
  # - name: input name attribute
  # - value: input value
  # - placeholder: placeholder text
  # - required: boolean
  # - disabled: boolean
  # - size: sm, base, lg
  # - error: error message
  # - helper_text: helper text below input
  # - icon: icon name (search, location, etc.)
  # - class: additional CSS classes
  
  type ||= 'text'
  size ||= 'base'
  required ||= false
  disabled ||= false
  error ||= nil
  helper_text ||= nil
  icon ||= nil
  name ||= ''
  value ||= ''
  placeholder ||= ''
  label ||= nil
  
  input_id = "input_#{SecureRandom.hex(4)}"
  
  # Size classes
  size_classes = case size
  when 'sm'
    "px-3 py-1.5 text-sm"
  when 'lg'
    "px-4 py-3 text-lg"
  else # base
    "px-4 py-2 text-base"
  end
  
  # Base input classes
  base_classes = "block w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
  
  # Error classes
  error_classes = error ? "border-red-500 focus:ring-red-500 focus:border-red-500" : ""
  
  all_input_classes = [base_classes, size_classes, error_classes, local_assigns[:class]].compact.join(' ')
%>

<div class="space-y-1">
  <% if label %>
    <label for="<%= input_id %>" class="block text-sm font-medium text-gray-700">
      <%= label %>
      <% if required %>
        <span class="text-red-500">*</span>
      <% end %>
    </label>
  <% end %>
  
  <div class="relative">
    <% if icon %>
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <% case icon %>
        <% when 'search' %>
          <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        <% when 'location' %>
          <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
        <% when 'email' %>
          <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
          </svg>
        <% end %>
      </div>
      <input 
        type="<%= type %>"
        id="<%= input_id %>"
        name="<%= name %>"
        value="<%= value %>"
        placeholder="<%= placeholder %>"
        class="<%= all_input_classes %> pl-10"
        <%= 'required' if required %>
        <%= 'disabled' if disabled %>
      >
    <% else %>
      <input 
        type="<%= type %>"
        id="<%= input_id %>"
        name="<%= name %>"
        value="<%= value %>"
        placeholder="<%= placeholder %>"
        class="<%= all_input_classes %>"
        <%= 'required' if required %>
        <%= 'disabled' if disabled %>
      >
    <% end %>
  </div>
  
  <% if error %>
    <p class="text-sm text-red-600">
      <%= error %>
    </p>
  <% end %>
  
  <% if helper_text && !error %>
    <p class="text-sm text-gray-500">
      <%= helper_text %>
    </p>
  <% end %>
</div>