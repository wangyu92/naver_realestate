<%
  content_for :title, "UI Components Showcase"
%>

<div class="min-h-screen bg-gray-50">
  <!-- Page Header -->
  <div class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="text-center">
        <h1 class="text-3xl font-bold text-gray-900">UI Components Showcase</h1>
        <p class="mt-4 text-lg text-gray-600">네이버 부동산 앱을 위한 재사용 가능한 UI 컴포넌트 라이브러리</p>
      </div>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Navigation -->
    <div class="mb-8">
      <nav class="flex space-x-8">
        <a href="#buttons" class="text-blue-600 hover:text-blue-800">Buttons</a>
        <a href="#cards" class="text-blue-600 hover:text-blue-800">Property Cards</a>
        <a href="#forms" class="text-blue-600 hover:text-blue-800">Form Elements</a>
        <a href="#navigation" class="text-blue-600 hover:text-blue-800">Navigation</a>
        <a href="#modals" class="text-blue-600 hover:text-blue-800">Modals</a>
        <a href="#alerts" class="text-blue-600 hover:text-blue-800">Alerts</a>
        <a href="#filters" class="text-blue-600 hover:text-blue-800">Advanced Filters</a>
        <a href="#gallery" class="text-blue-600 hover:text-blue-800">Gallery</a>
        <a href="#badges" class="text-blue-600 hover:text-blue-800">Badges</a>
        <a href="#prices" class="text-blue-600 hover:text-blue-800">Prices</a>
      </nav>
    </div>

    <!-- Buttons Section -->
    <section id="buttons" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Buttons</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-4">Button Variants</h3>
        <div class="flex flex-wrap gap-4 mb-6">
          <%= render 'components/button', text: 'Primary Button', variant: 'primary' %>
          <%= render 'components/button', text: 'Secondary Button', variant: 'secondary' %>
          <%= render 'components/button', text: 'Outline Button', variant: 'outline' %>
          <%= render 'components/button', text: 'Success Button', variant: 'success' %>
          <%= render 'components/button', text: 'Danger Button', variant: 'danger' %>
        </div>
        
        <h3 class="text-lg font-semibold mb-4">Button Sizes</h3>
        <div class="flex flex-wrap items-center gap-4 mb-6">
          <%= render 'components/button', text: 'Small', size: 'sm' %>
          <%= render 'components/button', text: 'Medium', size: 'base' %>
          <%= render 'components/button', text: 'Large', size: 'lg' %>
        </div>
        
        <h3 class="text-lg font-semibold mb-4">Disabled State</h3>
        <div class="flex gap-4">
          <%= render 'components/button', text: 'Disabled Button', disabled: true %>
          <%= render 'components/button', text: 'Loading...', loading: true %>
        </div>
      </div>
    </section>

    <!-- Property Cards Section -->
    <section id="cards" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Property Cards</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <% @sample_properties.each do |property| %>
            <%= render 'components/property_card', property: property %>
          <% end %>
        </div>
      </div>
    </section>

    <!-- Form Elements Section -->
    <section id="forms" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Form Elements</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg font-semibold mb-4">Input Fields</h3>
            <%= render 'components/input_field',
                label: '이름',
                name: 'name',
                placeholder: '이름을 입력하세요' %>
            
            <%= render 'components/input_field',
                label: '이메일',
                name: 'email',
                type: 'email',
                placeholder: 'example@email.com',
                class: 'mt-4' %>
            
            <%= render 'components/input_field',
                label: '전화번호',
                name: 'phone',
                type: 'tel',
                placeholder: '010-1234-5678',
                class: 'mt-4',
                icon: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>' %>

            <%= render 'components/input_field',
                label: '에러가 있는 필드',
                name: 'error_field',
                placeholder: '잘못된 값',
                error: '올바른 형식으로 입력해주세요',
                class: 'mt-4' %>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">Select Fields</h3>
            <%= render 'components/select_field',
                label: '지역 선택',
                name: 'location',
                placeholder: '지역을 선택하세요',
                options: [
                  { label: '강남구', value: 'gangnam' },
                  { label: '서초구', value: 'seocho' },
                  { label: '송파구', value: 'songpa' },
                  { label: '강동구', value: 'gangdong' }
                ] %>
            
            <%= render 'components/select_field',
                label: '매물 유형',
                name: 'property_type',
                placeholder: '유형을 선택하세요',
                options: [
                  { label: '아파트', value: 'apartment' },
                  { label: '오피스텔', value: 'officetel' },
                  { label: '빌라', value: 'villa' }
                ],
                helper: '원하는 매물 유형을 선택해주세요',
                class: 'mt-4' %>
          </div>
        </div>
      </div>
    </section>

    <!-- Navigation Section -->
    <section id="navigation" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Navigation</h2>
      <div class="bg-white rounded-lg shadow-sm overflow-hidden">
        <%= render 'components/navbar' %>
      </div>
      <div class="mt-4 p-4 bg-blue-50 rounded-lg">
        <p class="text-sm text-blue-800">
          <strong>참고:</strong> 모바일에서 햄버거 메뉴를 클릭하여 사이드 메뉴를 확인할 수 있습니다.
        </p>
      </div>
    </section>

    <!-- Modals Section -->
    <section id="modals" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Modals</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <div class="flex flex-wrap gap-4 mb-4">
          <%= render 'components/button', 
              text: 'Small Modal', 
              variant: 'primary',
              data: { action: 'click->modal#open' },
              data_target: '#modal-sm' %>
          
          <%= render 'components/button', 
              text: 'Medium Modal', 
              variant: 'secondary',
              data: { action: 'click->modal#open' },
              data_target: '#modal-base' %>
          
          <%= render 'components/button', 
              text: 'Large Modal', 
              variant: 'outline',
              data: { action: 'click->modal#open' },
              data_target: '#modal-lg' %>
        </div>
        
        <!-- Sample Modals -->
        <%= render 'components/modal',
            id: 'modal-sm',
            title: '작은 모달',
            size: 'sm',
            content: '이것은 작은 크기의 모달입니다. 간단한 확인이나 알림용으로 사용됩니다.' %>
        
        <%= render 'components/modal',
            id: 'modal-base',
            title: '기본 모달',
            size: 'base',
            content: '이것은 기본 크기의 모달입니다. 대부분의 경우에 사용되는 표준 크기입니다.' %>
        
        <%= render 'components/modal',
            id: 'modal-lg',
            title: '큰 모달',
            size: 'lg',
            content: '이것은 큰 크기의 모달입니다. 복잡한 폼이나 많은 내용을 담을 때 사용됩니다.' %>
      </div>
    </section>

    <!-- Alerts Section -->
    <section id="alerts" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Alerts</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm space-y-4">
        <%= render 'components/alert',
            type: 'success',
            message: '매물이 성공적으로 등록되었습니다!' %>
        
        <%= render 'components/alert',
            type: 'info',
            message: '새로운 매물 알림을 받으려면 설정에서 알림을 켜주세요.',
            title: '알림 설정' %>
        
        <%= render 'components/alert',
            type: 'warning',
            message: '매물 정보가 불완전합니다. 모든 필드를 작성해주세요.' %>
        
        <%= render 'components/alert',
            type: 'error',
            message: '매물 업로드에 실패했습니다. 다시 시도해주세요.',
            dismissible: true %>
      </div>
    </section>

    <!-- Filters Section -->
    <section id="filters" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Advanced Filter Components</h2>
      
      <!-- Range Sliders -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Range Sliders</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <%= render 'components/range_slider',
                label: '매매가 (만원)',
                name: 'sale_price',
                min: 0,
                max: 100000,
                step: 100,
                value_min: 10000,
                value_max: 50000,
                format: 'currency',
                show_inputs: true %>
          </div>
          
          <div>
            <%= render 'components/range_slider',
                label: '전용면적',
                name: 'exclusive_area',
                min: 0,
                max: 500,
                step: 1,
                value_min: 60,
                value_max: 120,
                format: 'area',
                show_inputs: true %>
          </div>
        </div>
      </div>

      <!-- Unit Toggle -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Unit Toggle</h3>
        <%= render 'components/unit_toggle',
            current_unit: 'pyeong',
            name: 'area_unit',
            labels: { pyeong: '평', sqm: '㎡' } %>
      </div>

      <!-- Multi Checkbox -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Multi Checkbox Selection</h3>
        <%= render 'components/multi_checkbox',
            label: '매물유형',
            name: 'property_types',
            options: [
              { label: '아파트', value: 'apartment', count: 1234 },
              { label: '오피스텔', value: 'officetel', count: 567 },
              { label: '빌라/연립', value: 'villa', count: 890 },
              { label: '단독주택', value: 'house', count: 234 },
              { label: '상가주택', value: 'commercial_house', count: 123 },
              { label: '다가구주택', value: 'multi_house', count: 345 }
            ],
            columns: 2,
            select_all: true %>
      </div>

      <!-- Direction Picker -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Direction Picker</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h4 class="text-md font-medium mb-4">Compass Style</h4>
            <%= render 'components/direction_picker',
                label: '방향 (나침반)',
                name: 'direction_compass',
                selected: ['south', 'southeast'],
                style: 'compass',
                multiple: true %>
          </div>
          
          <div>
            <h4 class="text-md font-medium mb-4">List Style</h4>
            <%= render 'components/direction_picker',
                label: '방향 (리스트)',
                name: 'direction_list',
                selected: ['north'],
                style: 'list',
                multiple: false %>
          </div>
        </div>
      </div>

      <!-- Floor Selector -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Floor Selector</h3>
        <%= render 'components/floor_selector',
            label: '층수',
            name: 'floor',
            placeholder: '예: 5/15, 10-12/20',
            multiple: true,
            value: '5/15' %>
      </div>

      <!-- Toggle Components -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Toggle Switches</h3>
        <div class="space-y-4">
          <%= render 'components/toggle',
              label: '엘리베이터 유무',
              name: 'has_elevator',
              checked: true %>
          
          <%= render 'components/toggle',
              label: '사진 있는 매물만',
              name: 'has_photos',
              color: 'green' %>
          
          <%= render 'components/toggle',
              label: '신축 매물',
              name: 'is_new',
              color: 'red',
              size: 'sm' %>
        </div>
      </div>

      <!-- Location Hierarchy -->
      <div class="mb-8 bg-white rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold mb-6">Korean Location Hierarchy</h3>
        <div class="max-w-2xl">
          <%= render 'components/location_hierarchy',
              label: '지역 선택 (시/도 → 구/군 → 동)',
              name: 'locations',
              selected: ['서울특별시 강남구 역삼동', '경기도 안산시 상록구 사동'],
              multiple: true,
              search: true,
              modal: false %>
        </div>
        
        <div class="mt-4 p-4 bg-blue-50 rounded-lg">
          <p class="text-sm text-blue-800">
            <strong>기능:</strong> 
            계층적 지역 선택, 실시간 검색, 다중 선택, 전체/부분 선택 상태 관리, 
            선택된 지역 태그 표시 및 개별 제거
          </p>
        </div>
      </div>

      <!-- Legacy Filter Sidebar -->
      <div class="mb-8 bg-gray-100 p-6 rounded-lg">
        <h3 class="text-lg font-semibold mb-4">Legacy Filter Sidebar</h3>
        <div class="max-w-sm">
          <%= render 'components/filter_sidebar', filter_options: @filter_options %>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Image Gallery</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <div class="max-w-2xl mx-auto">
          <%= render 'components/image_gallery',
              title: '매물 사진',
              images: [
                { url: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: '거실' },
                { url: 'https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: '주방' },
                { url: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: '침실' },
                { url: 'https://images.unsplash.com/photo-1507652313519-d4e9174996dd?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: '화장실' },
                { url: 'https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: '발코니' },
                { url: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', alt: '외부 전경' }
              ] %>
        </div>
        
        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
          <p class="text-sm text-gray-600">
            <strong>기능:</strong> 메인 이미지 클릭으로 풀스크린 보기, 화살표 키보드 내비게이션, 썸네일 클릭으로 이미지 선택
          </p>
        </div>
      </div>
    </section>

    <!-- Badges Section -->
    <section id="badges" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Badges</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <div class="flex flex-wrap gap-3">
          <%= render 'components/badge', text: '신축', variant: 'success' %>
          <%= render 'components/badge', text: '급매', variant: 'danger' %>
          <%= render 'components/badge', text: '협의가능', variant: 'warning' %>
          <%= render 'components/badge', text: '인기매물', variant: 'primary' %>
          <%= render 'components/badge', text: '추천', variant: 'info' %>
          <%= render 'components/badge', text: '기본', variant: 'gray' %>
        </div>
      </div>
    </section>

    <!-- Price Display Section -->
    <section id="prices" class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Price Display</h2>
      <div class="bg-white rounded-lg p-6 shadow-sm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg font-semibold mb-4">매매가</h3>
            <div class="space-y-3">
              <%= render 'components/price_display', price: 850000000, type: '매매' %>
              <%= render 'components/price_display', price: 1350000000, type: '매매' %>
              <%= render 'components/price_display', price: 2100000000, type: '매매' %>
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold mb-4">전세/월세</h3>
            <div class="space-y-3">
              <%= render 'components/price_display', price: 50000000, type: '전세' %>
              <%= render 'components/price_display', price: 150000, type: '월세', deposit: 10000000 %>
              <%= render 'components/price_display', price: 80000, type: '월세', deposit: 5000000 %>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- JavaScript for modal triggers -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Modal trigger functionality
    document.querySelectorAll('[data-action*="click->modal#open"]').forEach(button => {
      button.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        if (targetId) {
          const modal = document.querySelector(targetId);
          if (modal && modal.dataset.controller === 'modal') {
            // Manually trigger the modal open
            const controller = modal.querySelector('[data-modal-target="content"]')?.closest('[data-controller="modal"]');
            if (controller) {
              // Find the Stimulus controller instance and call open
              setTimeout(() => {
                modal.classList.remove('hidden');
                document.body.classList.add('overflow-hidden');
              }, 10);
            }
          }
        }
      });
    });
  });
</script>